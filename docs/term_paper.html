<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SDS410 - Term Paper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./410.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SDS410</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://ebookcentral.proquest.com/lib/smith/detail.action?docID=5820427" rel="" target="">
 <span class="menu-text">R.A.T.</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./sprints.html" rel="" target="">
 <span class="menu-text">Sprints</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./term_paper.html" rel="" target="" aria-current="page">
 <span class="menu-text">Term Paper</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://drive.google.com/drive/u/1/folders/1p18xWlvMDcWa1kw7XCNuorxabmxEbJW3" rel="" target="">
 <span class="menu-text">Screencasts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://docs.google.com/spreadsheets/d/1eTXqqSXiLjZozH0XwhP5eCIwhPKaiwxIf3VvgyN-Sbw/edit#gid=50606575" rel="" target="">
 <span class="menu-text">Roster</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://docs.google.com/document/d/e/2PACX-1vQokQEQfhXT3ndy2dRDQ03k-ml252KdGwVTKguUdzwsC777M5EkwQ89sO6Xl12w6gIx9mDerPfooyPP/pub" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#writing-for-data-science" id="toc-writing-for-data-science" class="nav-link active" data-scroll-target="#writing-for-data-science">Writing for data science</a></li>
  <li><a href="#audience" id="toc-audience" class="nav-link" data-scroll-target="#audience">Audience</a>
  <ul class="collapse">
  <li><a href="#the-structure-of-a-scientific-paper" id="toc-the-structure-of-a-scientific-paper" class="nav-link" data-scroll-target="#the-structure-of-a-scientific-paper">The structure of a scientific paper</a></li>
  <li><a href="#ethical-statement" id="toc-ethical-statement" class="nav-link" data-scroll-target="#ethical-statement">Ethical statement</a></li>
  </ul></li>
  <li><a href="#recommended-phases" id="toc-recommended-phases" class="nav-link" data-scroll-target="#recommended-phases">Recommended Phases</a>
  <ul class="collapse">
  <li><a href="#first-phase" id="toc-first-phase" class="nav-link" data-scroll-target="#first-phase">First phase</a></li>
  <li><a href="#second-phase" id="toc-second-phase" class="nav-link" data-scroll-target="#second-phase">Second phase</a></li>
  <li><a href="#final-phase" id="toc-final-phase" class="nav-link" data-scroll-target="#final-phase">Final phase</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Term Paper</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="writing-for-data-science" class="level1">
<h1>Writing for data science</h1>
<p>Please follow the following guidelines for <em>all</em> phases of your final paper:</p>
<ul>
<li>All papers will be written in <a href="https://rmarkdown.rstudio.com/">R Markdown</a> using the <code>term_paper.Rmd</code> file. <strong>Knit early, knit often.</strong></li>
<li>Use <a href="https://en.wikipedia.org/wiki/BibTeX">BibTeX</a> for citations. Use <a href="https://scholar.google.com/">Google Scholar</a> to gather reference information in BibTeX format (adjust manually where necessary). Include <a href="https://en.wikipedia.org/wiki/Digital_object_identifier"><code>doi</code></a> and/or <code>url</code> field in BibTeX entries. Insert citations into the body of the paper as appropriate <a href="https://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html">in R Markdown</a>. Cite R packages with information from <code>citation()</code>. You can start a <code>.bib</code> file with <code>knitr::write_bib()</code>. The `BibTeX database for this page looks <a href="refs.bib">like this</a>.</li>
<li>Include link to GitHub repository (where necessary) as a citation (even if it’s private)!</li>
<li>Figures should be in a <code>figure</code> environment (in LaTeX). If the figure is generated as a plot in R, name the chunk and use the <a href="https://bookdown.org/yihui/rmarkdown/r-code.html#figures"><code>fig.cap</code> chunk option</a>. If the figure is an external image, use <code>knitr::include_graphics()</code>. All Figures must be referenced explicitly in the text by number. Figures should have expansive captions that tell the reader what they are supposed to see in the figure. All figures should have readable axis labels and explicit units. Figures should be mostly self-explanatory! Spend <strong>more</strong> time gussying up the figures – not less! Recall <a href="https://beanumber.github.io/sds192/standards.html">the SDS 192 standards</a> for Aesthetics, Context, and Markdown.</li>
<li>Tables should be in a <code>table</code> environment (in LaTeX). If the table is generated from data in R, use <a href="https://bookdown.org/yihui/rmarkdown/r-code.html#tables">the <code>kable()</code> function</a>. If the table is input manually, just put it in a data.frame and use <code>kable()</code> anyway. Tables should also have expansive captions and must be referenced in the text by number. Simple summary tables are easy to generate and really helpful to readers!</li>
<li>Use <a href="https://bookdown.org/yihui/rmarkdown/markdown-syntax.html">Markdown formatting</a>, including: sections and subsections, lists, links, block quotes, chunks, and code, where appropriate.</li>
<li>Put any pieces of code in backticks (`). That includes names of packages, functions, variable names, and even certain strings. For bits of actual code, use a chunk. Note that R Markdown supports chunks in many languages, including <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html#python">Python</a>, <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html#sql">SQL</a>, and <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html#shell-scripts">bash</a>.</li>
<li>Use <code>wordcountaddin::text_stats()</code> to count your words.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>wordcountaddin<span class="sc">::</span><span class="fu">text_stats</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="audience" class="level1">
<h1>Audience</h1>
<p>Your final deliverable will be to write up your project as an academic paper. For your convenience, the format should conform to the <a href="https://www.causeweb.org/usproc/usresp">Undergraduate Research Project Competition (USRESP)</a> guidelines. If possible, you are strongly encouraged to submit your paper to the competition, but that decision will not affect your grade in this class. As a rough guideline, the paper should be 8–10 pages long, plus references, and an appendix (of arbitrary length) in which you can show more graphics, tables, etc.</p>
<ul>
<li>Use your GitHub repository to write the paper. Put the paper contents into a subdirectory called <code>term_paper</code>.</li>
<li>Due dates are in the schedule on the main page of the course webpage</li>
<li>One submission per group.</li>
</ul>
<section id="the-structure-of-a-scientific-paper" class="level2">
<h2 class="anchored" data-anchor-id="the-structure-of-a-scientific-paper">The structure of a scientific paper</h2>
<p>Most commonly, research papers will have five sections like:</p>
<ol type="1">
<li>Introduction and Motivation: What is the problem you are trying to solve? Why is this problem interesting? What has been tried before? What have been the shortcoming of those approaches that necessitate your efforts? Often, this section will conclude with a subsection (or paragraph) outlining “our contributions.” What is the new knowledge that this paper contributes?</li>
<li>Data: Where did it come from? What are some basic summary statistics, variable definitions, and/or visualizations that help the reader understand the data you are working with?</li>
<li>Methods: What did you actually do? What techniques or methods did you employ? What were the specifications for any statistical models you used? What software or packages did you use or develop?</li>
<li>Results: What did you learn about the problem you identified in Section 1? This is where you put the tables, figures, and analytics by-products of your work.</li>
<li>Conclusion: What are the limitations of your work? What are some next steps that someone (either you or another research group) should consider in attempting to further your work? Remind us one last time about what you did.</li>
<li>References: Every reference (except for books) needs a URL. Use Zotero and Google Scholar to help with BibTeX. Every book needs publisher location.</li>
<li>(Optional) Appendix: Include supplementary graphs and tables in an appendix. The reader may or may not read the appendix.</li>
</ol>
</section>
<section id="ethical-statement" class="level2">
<h2 class="anchored" data-anchor-id="ethical-statement">Ethical statement</h2>
<p>Your final paper <strong>must</strong> include an ethical statement. The ethical statement may be relegated to the appendix at your discretion.</p>
<ul>
<li>Drawing on what you have learned about data science ethics in this class, discuss <strong>any</strong> ethical considerations in your project. For some projects, this statement could be quite short (one paragraph may suffice). For other projects, more detail may be needed (no more than 2 pages).</li>
<li>Be expansive and creative in your thinking about <strong>possible</strong> ethical considerations. One way to do this assignment poorly would be to write a short statement asserting that there are no ethical considerations, only to have me think of several fairly obvious ones.</li>
</ul>
<hr>
</section>
</section>
<section id="recommended-phases" class="level1">
<h1>Recommended Phases</h1>
<p>Following the principle of the “minimal viable product” I recommend you build out your paper by “thinking big, but starting small.” Note you do not need to make a submission at each phase, rather just the final one.</p>
<section id="first-phase" class="level2">
<h2 class="anchored" data-anchor-id="first-phase">First phase</h2>
<p>Your first phase focuses on the mechanics of writing a journal paper in R Markdown. First, you have to get the template to compile. Second, you can fill in easy details about yourselves. Third, write a complete introductory section. This section should be complete and include a compreshensible description of your problem, and why the previous approaches to solving it were insufficient. Fourth, write a complete section about your data. What data do you have? How many rows and columns? What format? What are some basic summary statistics? [This is a good place to include a table.] Fifth, set up BibTeX and cite at least one reference in your introduction.</p>
<p>Your submission should include:</p>
<ul>
<li>Title</li>
<li>Authors and affiliations</li>
<li>Abstract</li>
<li>Introduction (Section 1)</li>
<li>Data (Section 2)</li>
</ul>
<div class="cell-output-display">
<table class="table">
<caption>Final paper first phase rubric</caption>
<colgroup>
<col style="width: 3%">
<col style="width: 22%">
<col style="width: 34%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Criteria</th>
<th style="text-align: left;">Four</th>
<th style="text-align: left;">Five</th>
<th style="text-align: left;">Six</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Formatting</td>
<td style="text-align: left;">Multiple formatting errors. References do not use BiBTeX.</td>
<td style="text-align: left;">Formatting works, but does not help to structure the paper. Section titles do not clearly indicate what section is about. Figures/images are too big or too small.</td>
<td style="text-align: left;">Section titles provide clear structure. Figures, tables, and images fit nicely into the narrative. References use BiBTeX and are complete.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Attention to detail</td>
<td style="text-align: left;">Title does is not descriptive. References are mostly incomplete.</td>
<td style="text-align: left;">Author information and/or affiliations are incomplete. References do not include URLs.</td>
<td style="text-align: left;">Title is informative and catchy. Author information is complete. References include complete information, including URLs.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Introduction</td>
<td style="text-align: left;">Introduction does not describe the problem. Introduction does not discuss previous approaches or cite previous work.</td>
<td style="text-align: left;">Introduction describes the problem, but uses language that is either overly technical (unexplained jargon) or not technical enough (imprecise). Description of previous work is vague.</td>
<td style="text-align: left;">Introduction clearly describes the problem using appropriate language. Introduction discusses previous work and includes citations. Introduction is written in present tense.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Data</td>
<td style="text-align: left;">Description of data is vague, rife with jargon, or inaccurate. Key variables are not defined. Units are not included.</td>
<td style="text-align: left;">Description of data is not comprehensive. Key variables are summarized but not well-defined. Units are implied or omitted. Tables and/or figures are unclear or barely readable.</td>
<td style="text-align: left;">Description of data is clear and comprehensive. Basic summary statistics are included in neat, readable tables. Key variables are well-defined and summarized in tables or figures, with units made explicit.</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="second-phase" class="level2">
<h2 class="anchored" data-anchor-id="second-phase">Second phase</h2>
<p>Second phase criteria include everything in the first phase, plus:</p>
<ul>
<li>Methods (Section 3)</li>
<li>Results (Section 4) – can be preliminary</li>
</ul>
<div class="cell-output-display">
<table class="table">
<caption>Final paper second phase rubric</caption>
<colgroup>
<col style="width: 1%">
<col style="width: 22%">
<col style="width: 35%">
<col style="width: 40%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Criteria</th>
<th style="text-align: left;">Ten</th>
<th style="text-align: left;">Eleven</th>
<th style="text-align: left;">Twelve</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">General</td>
<td style="text-align: left;">Corrections from first phase were fully implemented. Methods section is imprecise and/or incomplete. Results section is sparse.</td>
<td style="text-align: left;">Methods section contains too much narrative about what was tried, rather than focusing on what is important for the reader to know. Results section is largely incomplete and fails to drive home message.</td>
<td style="text-align: left;">Methods section explains in appropriate scientific language what is important for the reader to know and how it was done. Results section drives home the message of the paper using fully-explained examples, figures, tables, etc.</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="final-phase" class="level2">
<h2 class="anchored" data-anchor-id="final-phase">Final phase</h2>
<p>Final phase criteria include everything in the first and second phases, plus:</p>
<ul>
<li>Results (Section 4) – finalized</li>
<li>Conclusion (Section 5)
<ul>
<li>Ethical statement (can be in appendix)</li>
<li>Limitations</li>
<li>Future work</li>
<li>Final thoughts</li>
</ul></li>
<li>Acknowledgements</li>
</ul>
<div class="cell-output-display">
<table class="table">
<caption>Final paper final phase rubric</caption>
<colgroup>
<col style="width: 3%">
<col style="width: 36%">
<col style="width: 2%">
<col style="width: 58%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Criteria</th>
<th style="text-align: left;">Sixteen</th>
<th style="text-align: left;">Eighteen</th>
<th style="text-align: left;">Twenty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Formatting</td>
<td style="text-align: left;">Section titles do not clearly indicate what section is about. Figures/images are too big or too small. References do not use BiBTeX.</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Section titles provide clear structure. Figures, tables, and images fit nicely into the narrative. References use BiBTeX and are complete.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Narrative</td>
<td style="text-align: left;">Paper tells the story of what you did, including excessive details about data wrangling, and/or failed approaches that are not informative.</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Introduction explains key concepts and illustrates why research was necessary. Team’s contribution is clearly communicated. Outside research is extensive and appropriately sourced. Paper focuses on the information that is most important to readers.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Completeness</td>
<td style="text-align: left;">Results section is still largely empty. Methods section is thin on details or largely incomplete. Figures, tables, and references are not working properly.</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Results section is substantially complete. Methods section is fully sketched out, if not complete. Figures, tables, and references are working, if not complete.</td>
</tr>
</tbody>
</table>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>